"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[836],{836:(b,m,i)=>{i.r(m),i.d(m,{EmpleadosPageModule:()=>P});var u=i(6814),g=i(95),a=i(7027),d=i(2891),p=i(5861),e=i(5879),f=i(7523),h=i(6240);function E(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"ion-item",10),e.NdJ("click",function(){const l=e.CHM(n).$implicit,c=e.oxw();return e.KtG(c.presentActionSheet(l))}),e.TgZ(1,"ion-thumbnail",2),e._UZ(2,"img",11),e.qZA(),e.TgZ(3,"ion-label")(4,"h2"),e._uU(5),e.qZA(),e.TgZ(6,"h2"),e._uU(7),e.qZA(),e.TgZ(8,"h2"),e._uU(9),e.qZA(),e.TgZ(10,"h2"),e._uU(11),e.qZA(),e.TgZ(12,"h2"),e._uU(13),e.qZA()()()}if(2&o){const n=s.$implicit;e.xp6(2),e.Q6J("src",n.imageUrl,e.LSH),e.xp6(3),e.Oqu(n.nombre),e.xp6(2),e.Oqu(n.apellido_p),e.xp6(2),e.Oqu(n.apellido_m),e.xp6(2),e.Oqu(n.telefono),e.xp6(2),e.Oqu(n.correo)}}const Z=function(){return["/agregar-empleado"]},x=[{path:"",component:(()=>{var o;class s{constructor(t,r,l,c,y){this.actionSheetCtrl=t,this.router=r,this.alertController=l,this.db=c,this.storage=y,this.empleados=[],this.loadEmpleados()}loadEmpleados(){this.db.list("EMPLEADOS").snapshotChanges().subscribe(r=>{this.empleados=r.map(l=>{const c=l.payload.val();return"object"==typeof c&&null!==c?{uid:l.key,...c}:{}})})}presentActionSheet(t){var r=this;return(0,p.Z)(function*(){yield(yield r.actionSheetCtrl.create({header:"Opciones De Empleado",backdropDismiss:!1,buttons:[{text:"Eliminar Empleado",role:"destructive",data:{action:"delete"},handler:()=>{r.eliminacion(t)}},{text:"Ver Perfil",handler:()=>{r.verPerfil(t.uid)}},{text:"Actualizar Informaci\xf3n",handler:()=>{r.actualizarEmpleado(t.uid)}},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}]})).present()})()}eliminacion(t){var r=this;return(0,p.Z)(function*(){yield(yield r.alertController.create({header:"\xa1Advertencia!",message:"\xbfRealmente desea eliminar este empleado?",buttons:[{text:"S\xed",handler:()=>{r.borrarEmpleado(t)}},"No"]})).present()})()}verPerfil(t){t?this.router.navigate(["/perfil-empleado",t]):console.error("empleadoUid is undefined or null")}actualizarEmpleado(t){this.router.navigate(["/actualizar-empleado",t])}ngOnInit(){}borrarEmpleado(t){this.storage.refFromURL(t.imageUrl).delete().toPromise().then(()=>{this.db.list("EMPLEADOS").remove(t.uid).then(()=>{console.log("Empleado eliminado con \xe9xito.")}).catch(l=>{console.error("Error al eliminar empleado:",l)})}).catch(l=>{console.error("Error al eliminar imagen:",l)})}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(a.BX),e.Y36(d.F0),e.Y36(a.Br),e.Y36(f.KQ),e.Y36(h.Q1))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-empleados"]],decls:15,vars:5,consts:[[3,"translucent"],["color","primary"],["slot","start"],["color","secondary"],["fullscreen",""],["slot","fixed","vertical","bottom","horizontal","end"],["color","secondary",3,"routerLink"],["name","person-add"],[3,"inset"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[2,"width","65px","height","65px",3,"src"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3)(4,"ion-menu-button",2),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Empleados"),e.qZA()()(),e.TgZ(7,"ion-content",4)(8,"ion-fab",5)(9,"ion-fab-button",6),e._UZ(10,"ion-icon",7),e.qZA()(),e.TgZ(11,"h1"),e._uU(12,"Empleados Registrados"),e.qZA(),e.TgZ(13,"ion-list",8),e.YNc(14,E,14,6,"ion-item",9),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(9),e.Q6J("routerLink",e.DdM(4,Z)),e.xp6(4),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",r.empleados))},dependencies:[u.sg,a.oU,a.Sm,a.W2,a.IJ,a.W4,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.fG,a.Bs,a.wd,a.sr,a.cs,a.YI,d.rH],styles:[".live[_ngcontent-%COMP%]{text-align:center;font-size:x-large;font-style:normal;align-self:center;padding:10px 20px;justify-content:center;justify-self:center;align-items:center}ion-fab[_ngcontent-%COMP%]{margin-bottom:20px}"]}),s})()}];let v=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(x),d.Bz]}),s})(),P=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,g.u5,a.Pc,v]}),s})()}}]);