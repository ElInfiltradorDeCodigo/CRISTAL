"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3974],{3974:(O,p,s)=>{s.r(p),s.d(p,{ClientesPageModule:()=>x});var g=s(6814),h=s(95),r=s(7027),u=s(2891),d=s(5861),m=s(5619),t=s(5879),f=s(7523),P=s(6240);function Z(o,c){if(1&o){const a=t.EpF();t.TgZ(0,"ion-item",9),t.NdJ("click",function(){const i=t.CHM(a).$implicit,l=t.oxw();return t.KtG(l.presentActionSheet(i))}),t.TgZ(1,"ion-thumbnail",2),t._UZ(2,"img",10),t.qZA(),t.TgZ(3,"ion-label")(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"h2"),t._uU(7),t.qZA(),t.TgZ(8,"h2"),t._uU(9),t.qZA(),t.TgZ(10,"h2"),t._uU(11),t.qZA(),t.TgZ(12,"h2"),t._uU(13),t.qZA(),t.TgZ(14,"h2"),t._uU(15),t.qZA()()()}if(2&o){const a=c.$implicit;t.xp6(2),t.Q6J("src",a.imageUrl,t.LSH),t.xp6(3),t.Oqu(a.nombre),t.xp6(2),t.Oqu(a.apellido_p),t.xp6(2),t.Oqu(a.apellido_m),t.xp6(2),t.Oqu(a.telefono),t.xp6(2),t.Oqu(a.localidad),t.xp6(2),t.Oqu(a.estado)}}const C=function(){return["/agregar-productor"]},v=[{path:"",component:(()=>{var o;class c{constructor(e,n,i,l,T,A){this.actionSheetCtrl=e,this.router=n,this.alertController=i,this.db=l,this.storage=T,this.toastCtrl=A,this._productores=new m.X([])}presentActionSheet(e){var n=this;return(0,d.Z)(function*(){n.selectedProductor=e,yield(yield n.actionSheetCtrl.create({header:"Opciones De Productor",backdropDismiss:!1,buttons:[{text:"Eliminar Productor",role:"destructive",data:{action:"delete"},handler:()=>{n.eliminacion()}},{text:"Ver Informaci\xf3n",data:{action:"actualizarDatos"},handler:()=>{n.verPerfil()}},{text:"Actualizar Informaci\xf3n",data:{action:"actualizarDatos"},handler:()=>{n.actualizarEmpleado()}},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}]})).present()})()}showToast(e,n="success"){var i=this;return(0,d.Z)(function*(){(yield i.toastCtrl.create({message:e,duration:2e3,color:n})).present()})()}eliminacion(){var e=this;return(0,d.Z)(function*(){e.selectedProductor?yield(yield e.alertController.create({header:"\xa1Advertencia!",message:"\xbfRealmente desea eliminar este productor?",buttons:[{text:"S\xed",handler:()=>{e.eliminarProductor(e.selectedProductor.key,e.selectedProductor.imageUrl)}},"No"]})).present():console.error("selectedProductor no est\xe1 definido.")})()}verPerfil(){this.router.navigate(["/perfil-productor",{productor:JSON.stringify(this.selectedProductor)}])}actualizarEmpleado(){this.router.navigate(["/actualizar-productor",{productor:JSON.stringify(this.selectedProductor)}])}ngOnInit(){this.cargarProductores()}cargarProductores(){this.db.list("PRODUCTORES").snapshotChanges().subscribe(e=>{const n=e.map(i=>({key:i.key,...i.payload.val()}));this._productores.next(n)}),this.productores=this._productores.asObservable()}eliminarProductor(e,n){var i=this;return(0,d.Z)(function*(){try{yield i.storage.refFromURL(n).delete().toPromise(),yield i.db.object(`PRODUCTORES/${e}`).remove(),i.showToast("Productor eliminado con \xe9xito","success")}catch(l){console.error("Error al eliminar productor: ",l),i.showToast("Error al eliminar productor","danger")}})()}}return(o=c).\u0275fac=function(e){return new(e||o)(t.Y36(r.BX),t.Y36(u.F0),t.Y36(r.Br),t.Y36(f.KQ),t.Y36(P.Q1),t.Y36(r.yF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-clientes"]],decls:15,vars:7,consts:[[3,"translucent"],["color","primary"],["slot","start"],["fullscreen",""],["slot","fixed","vertical","bottom","horizontal","end"],["color","secondary",3,"routerLink"],["name","person-add"],[3,"inset"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[2,"width","65px","height","65px",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-menu-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Productores"),t.qZA()()(),t.TgZ(6,"ion-content",3)(7,"ion-fab",4)(8,"ion-fab-button",5),t._UZ(9,"ion-icon",6),t.qZA()(),t.TgZ(10,"h1"),t._uU(11,"Productores Registrados"),t.qZA(),t.TgZ(12,"ion-list",7),t.YNc(13,Z,16,7,"ion-item",8),t.ALo(14,"async"),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(8),t.Q6J("routerLink",t.DdM(6,C)),t.xp6(4),t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(14,4,n.productores)))},dependencies:[g.sg,r.Sm,r.W2,r.IJ,r.W4,r.Gu,r.gu,r.Ie,r.Q$,r.q_,r.fG,r.Bs,r.wd,r.sr,r.YI,u.rH,g.Ov],styles:["ion-fab[_ngcontent-%COMP%]{margin-bottom:20px}"]}),c})()}];let y=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(v),u.Bz]}),c})(),x=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,h.u5,r.Pc,y]}),c})()}}]);