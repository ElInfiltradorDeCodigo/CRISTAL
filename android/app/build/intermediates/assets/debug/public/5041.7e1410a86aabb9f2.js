"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5041],{5041:(P,h,i)=>{i.r(h),i.d(h,{VentasPageModule:()=>C});var u=i(6814),m=i(95),n=i(7027),d=i(2891),g=i(5861),p=i(7398),t=i(5879),v=i(7523);function f(a,s){if(1&a){const r=t.EpF();t.TgZ(0,"ion-card",8),t.NdJ("click",function(){const c=t.CHM(r).$implicit,l=t.oxw();return t.KtG(l.presentActionSheet(c.key))}),t.TgZ(1,"ion-card-header")(2,"ion-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-card-subtitle"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-card-content")(7,"ion-list")(8,"ion-item")(9,"ion-label"),t._uU(10),t.qZA()(),t.TgZ(11,"ion-item")(12,"ion-label"),t._uU(13),t.qZA()(),t.TgZ(14,"ion-item")(15,"ion-label"),t._uU(16),t.qZA()()()()()}if(2&a){const r=s.$implicit,e=t.oxw();t.xp6(3),t.hij("Fecha Venta: ",r.fecha,""),t.xp6(2),t.hij("Total Vendido: ",r.total,""),t.xp6(5),t.hij("Cantidad Insumos: ",e.getCantidadProductos(r),""),t.xp6(3),t.hij("Venta Realizada Por: ",r.empleado,""),t.xp6(3),t.hij("Cliente: ",e.getNombreCompleto(r.nombre_cliente),"")}}const V=function(){return["/agregar-venta"]},Z=[{path:"",component:(()=>{var a;class s{constructor(e,o,c,l,b){this.actionSheetCtrl=e,this.router=o,this.alertController=c,this.db=l,this.toastCtrl=b}presentActionSheet(e){var o=this;return(0,g.Z)(function*(){yield(yield o.actionSheetCtrl.create({header:"Opciones De Venta",backdropDismiss:!1,buttons:[{text:"Eliminar",role:"destructive",data:{action:"delete"},handler:()=>{o.eliminacion(e)}},{text:"Ver Detalles",data:{action:"actualizarDatos"},handler:()=>{o.verDetallesVenta(e)}},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}]})).present()})()}showToast(e,o){var c=this;return(0,g.Z)(function*(){(yield c.toastCtrl.create({message:e,duration:2e3,color:o})).present()})()}eliminacion(e){var o=this;return(0,g.Z)(function*(){yield(yield o.alertController.create({header:"\xa1Advertencia!",message:"\xbfRealmente desea eliminar esta venta?",buttons:[{text:"S\xed",handler:()=>{o.db.object(`VENTAS/${e}`).remove().then(()=>{o.showToast("Venta eliminada con \xe9xito","success")}).catch(l=>{o.showToast("Error al eliminar la venta","danger")})}},"No"]})).present()})()}verDetallesVenta(e){this.router.navigate(["/detalle-venta",e])}actualizarVenta(){this.router.navigate(["/actualizar-venta"])}ngOnInit(){this.ventas=this.db.list("VENTAS").snapshotChanges().pipe((0,p.U)(e=>e.map(o=>{const c=o.payload.val();return{key:o.key,...c}})))}obtenerVentas(){return this.db.list("VENTAS").valueChanges()}getCantidadProductos(e){return e.productos.length}getNombreCompleto(e){return`${e.nombre} ${e.apellido_p} ${e.apellido_m}`}}return(a=s).\u0275fac=function(e){return new(e||a)(t.Y36(n.BX),t.Y36(d.F0),t.Y36(n.Br),t.Y36(v.KQ),t.Y36(n.yF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ventas"]],decls:16,vars:6,consts:[[3,"translucent"],["color","primary"],["slot","start"],["slot","start","color","secondary"],["slot","fixed","vertical","bottom","horizontal","end"],["color","secondary",3,"routerLink"],["name","bag-add"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-back-button",3)(4,"ion-menu-button",2),t.qZA(),t.TgZ(5,"ion-title"),t._uU(6,"Ventas"),t.qZA()()(),t.TgZ(7,"ion-content")(8,"ion-fab",4)(9,"ion-fab-button",5),t._UZ(10,"ion-icon",6),t.qZA()(),t.TgZ(11,"ion-grid")(12,"ion-row")(13,"ion-col"),t.YNc(14,f,17,5,"ion-card",7),t.ALo(15,"async"),t.qZA()()()()),2&e&&(t.Q6J("translucent",!0),t.xp6(9),t.Q6J("routerLink",t.DdM(5,V)),t.xp6(5),t.Q6J("ngForOf",t.lcZ(15,3,o.ventas)))},dependencies:[u.sg,n.oU,n.Sm,n.PM,n.FN,n.Zi,n.tO,n.Dq,n.wI,n.W2,n.IJ,n.W4,n.jY,n.Gu,n.gu,n.Ie,n.Q$,n.q_,n.fG,n.Nd,n.wd,n.sr,n.cs,n.YI,d.rH,u.Ov],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0}ion-fab[_ngcontent-%COMP%]{margin-bottom:20px}"]}),s})()}];let y=(()=>{var a;class s{}return(a=s).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(Z),d.Bz]}),s})(),C=(()=>{var a;class s{}return(a=s).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.ez,m.u5,n.Pc,y]}),s})()}}]);