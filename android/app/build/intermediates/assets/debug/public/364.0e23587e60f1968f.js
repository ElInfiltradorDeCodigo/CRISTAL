"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[364],{364:(A,p,s)=>{s.r(p),s.d(p,{SucursalesPageModule:()=>b});var m=s(6814),f=s(95),o=s(7027),u=s(2891),d=s(5861),S=s(7398),t=s(5879),v=s(7523),Z=s(6240);function x(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"ion-card",8),t.NdJ("click",function(){const l=t.CHM(n).$implicit,i=t.oxw();return t.KtG(i.presentActionSheet(l))}),t._UZ(1,"img",9),t.TgZ(2,"ion-card-header")(3,"ion-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"ion-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"ion-card-subtitle"),t._uU(8),t.qZA(),t.TgZ(9,"ion-card-subtitle"),t._uU(10),t.qZA(),t.TgZ(11,"ion-card-subtitle"),t._uU(12),t.qZA()()()}if(2&e){const n=c.$implicit;t.xp6(1),t.Q6J("src",n.imageUrl,t.LSH),t.xp6(3),t.Oqu(n.nombre_sucursal),t.xp6(2),t.hij("Tipo Sucursal: ",n.tipo_sucursal,""),t.xp6(2),t.hij("Localidad: ",n.localidad,""),t.xp6(2),t.hij("Colonia: ",n.colonia,""),t.xp6(2),t.hij("Codigo Postal: ",n.codigo_postal,"")}}const y=function(){return["/agregar-sucursal"]},C=[{path:"",component:(()=>{var e;class c{constructor(a,r,l,i,g,h){this.actionSheetCtrl=a,this.router=r,this.alertController=l,this.db=i,this.storage=g,this.toastController=h}presentActionSheet(a){var r=this;return(0,d.Z)(function*(){yield(yield r.actionSheetCtrl.create({header:"Opciones De Sucursal",backdropDismiss:!1,buttons:[{text:"Eliminar",role:"destructive",data:{action:"delete"},handler:()=>{r.eliminacion(a)}},{text:"Actualizar Datos",data:{action:"actualizarDatos"},handler:()=>{r.actualizarDatos(a)}},{text:"Ver Departamentos",data:{action:"actualizarDatos"},handler:()=>{r.verDepartamentos()}},{text:"Cerrar",role:"cancel",data:{action:"cancel"}}]})).present()})()}eliminacion(a){var r=this;return(0,d.Z)(function*(){yield(yield r.alertController.create({header:"\xa1Advertencia!",message:"\xbfRealmente desea eliminar esta sucursal?",buttons:[{text:"S\xed",handler:()=>{r.storage.refFromURL(a.imageUrl).delete().subscribe(()=>{console.log("Imagen eliminada del storage")},i=>{console.error("Error eliminando imagen del storage",i)}),r.db.object(`SUCURSALES/${a.key}`).remove().then((0,d.Z)(function*(){console.log("Sucursal eliminada de la base de datos"),(yield r.toastController.create({message:"Sucursal eliminada con \xe9xito.",duration:2e3,color:"success"})).present()})).catch(function(){var i=(0,d.Z)(function*(g){console.error("Error eliminando sucursal de la base de datos",g),(yield r.toastController.create({message:"Error eliminando sucursal. Por favor, intenta de nuevo.",duration:2e3,color:"danger"})).present()});return function(g){return i.apply(this,arguments)}}())}},{text:"No",role:"cancel"}]})).present()})()}actualizarDatos(a){this.router.navigate(["/actualizar-sucursal"],{state:{sucursal:a}})}verDepartamentos(){this.router.navigate(["/departamentos"])}ngOnInit(){this.sucursales$=this.db.list("SUCURSALES").snapshotChanges().pipe((0,S.U)(a=>a.map(r=>({key:r.payload.key,...r.payload.val()}))))}}return(e=c).\u0275fac=function(a){return new(a||e)(t.Y36(o.BX),t.Y36(u.F0),t.Y36(o.Br),t.Y36(v.KQ),t.Y36(Z.Q1),t.Y36(o.yF))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sucursales"]],decls:11,vars:6,consts:[[3,"translucent"],["color","primary"],["slot","start"],["fullscreen",""],["slot","fixed","vertical","bottom","horizontal","end"],["color","secondary",3,"routerLink"],["name","add"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"src"]],template:function(a,r){1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),t._uU(3,"Sucursales"),t.qZA(),t._UZ(4,"ion-menu-button",2),t.qZA()(),t.TgZ(5,"ion-content",3)(6,"ion-fab",4)(7,"ion-fab-button",5),t._UZ(8,"ion-icon",6),t.qZA()(),t.YNc(9,x,13,6,"ion-card",7),t.ALo(10,"async"),t.qZA()),2&a&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("routerLink",t.DdM(5,y)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,3,r.sucursales$)))},dependencies:[m.sg,o.PM,o.Zi,o.tO,o.Dq,o.W2,o.IJ,o.W4,o.Gu,o.gu,o.fG,o.wd,o.sr,o.YI,u.rH,m.Ov],styles:[".eliminar[_ngcontent-%COMP%]{color:red}ion-fab[_ngcontent-%COMP%]{margin-bottom:20px}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;border-top-left-radius:10px;border-top-right-radius:10px}"]}),c})()}];let P=(()=>{var e;class c{}return(e=c).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(C),u.Bz]}),c})(),b=(()=>{var e;class c{}return(e=c).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,f.u5,o.Pc,P]}),c})()}}]);