"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3517],{3517:(P,d,n)=>{n.r(d),n.d(d,{AgregarDepartamentoPageModule:()=>y});var p=n(6814),s=n(95),r=n(7027),g=n(2891),h=n(5861),a=n(5879),b=n(7523),A=n(6796);function Z(t,i){if(1&t&&(a.TgZ(0,"ion-select-option",15),a._uU(1),a.qZA()),2&t){const l=i.$implicit;a.Q6J("value",l.uid),a.xp6(1),a.Oqu(l.nombre_sucursal)}}const v=[{path:"",component:(()=>{var t;class i{constructor(e,o,c,u,m,f){this.toastController=e,this.db=o,this.fb=c,this.auth=u,this.loadingCtrl=m,this.router=f,this.sucursales=[];const C=(new Date).toISOString().split("T")[0];this.form=this.fb.group({nombre_departamento:["",[s.kI.required,s.kI.maxLength(50)]],sucursal:["",s.kI.required],fecha_creacion:[{value:C,disabled:!0},s.kI.required],autor:[{value:"",disabled:!0},s.kI.required]})}ngOnInit(){this.cargarSucursales(),this.cargarUsuarioActual()}cargarSucursales(){this.db.list("SUCURSALES").valueChanges().subscribe(e=>{this.sucursales=e})}cargarUsuarioActual(){this.auth.user.subscribe(e=>{var o;e&&(this.autor=e.displayName||e.email||"Usuario desconocido",null===(o=this.form.get("autor"))||void 0===o||o.setValue(this.autor))})}datosCambiados(){var e=this;return(0,h.Z)(function*(){if(e.form.valid){const o=e.form.getRawValue(),c=e.db.list("DEPARTAMENTOS"),u=yield e.loadingCtrl.create({message:"Registrando departamento...",backdropDismiss:!1});yield u.present();try{yield c.push({nombre:o.nombre_departamento,sucursal:o.sucursal,fecha_creacion:o.fecha_creacion,autor:o.autor}),yield u.dismiss(),(yield e.toastController.create({message:"El Departamento Se Ha Registrado!",duration:2e3,cssClass:"toast-custom"})).present(),e.router.navigate(["/departamentos"])}catch(m){yield u.dismiss(),console.error("Error al registrar el departamento:",m),(yield e.toastController.create({message:"Hubo un error al registrar el departamento.",duration:2e3,cssClass:"toast-custom"})).present()}}else(yield e.toastController.create({message:"Por favor, llena todos los campos correctamente.",duration:2e3,cssClass:"toast-custom"})).present()})()}}return(t=i).\u0275fac=function(e){return new(e||t)(a.Y36(r.yF),a.Y36(b.KQ),a.Y36(s.qu),a.Y36(A.zQ),a.Y36(r.HT),a.Y36(g.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-agregar-departamento"]],decls:29,vars:5,consts:[[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/departamentos","color","secondary"],["fullscreen",""],[3,"formGroup","ngSubmit"],["position","stacked"],["formControlName","nombre_departamento","maxlength","50","required",""],["position","floating"],["formControlName","sucursal"],[3,"value",4,"ngFor","ngForOf"],["formControlName","fecha_creacion","maxlength","45","required",""],["formControlName","autor","maxlength","70","required","",3,"disabled"],[1,"btn"],["expand","block","type","submit","color","secondary",2,"max-width","200px","margin","20px auto",3,"disabled"],[3,"value"]],template:function(e,o){1&e&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),a._UZ(3,"ion-back-button",3),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5,"Registrar Departamento"),a.qZA()()(),a.TgZ(6,"ion-content",4)(7,"form",5),a.NdJ("ngSubmit",function(){return o.datosCambiados()}),a.TgZ(8,"ion-list")(9,"ion-item")(10,"ion-label",6),a._uU(11,"Nombre Departamento:"),a.qZA(),a._UZ(12,"ion-input",7),a.qZA(),a.TgZ(13,"ion-item")(14,"ion-label",8),a._uU(15,"Sucursal Dirigida:"),a.qZA(),a.TgZ(16,"ion-select",9),a.YNc(17,Z,2,2,"ion-select-option",10),a.qZA()(),a.TgZ(18,"ion-item")(19,"ion-label",6),a._uU(20,"Fecha Creaci\xf3n:"),a.qZA(),a._UZ(21,"ion-input",11),a.qZA(),a.TgZ(22,"ion-item")(23,"ion-label",6),a._uU(24,"Creado Por:"),a.qZA(),a._UZ(25,"ion-input",12),a.qZA()(),a.TgZ(26,"div",13)(27,"ion-button",14),a._uU(28,"Registrar"),a.qZA()()()()),2&e&&(a.Q6J("translucent",!0),a.xp6(7),a.Q6J("formGroup",o.form),a.xp6(10),a.Q6J("ngForOf",o.sucursales),a.xp6(8),a.Q6J("disabled",!0),a.xp6(2),a.Q6J("disabled",o.form.invalid))},dependencies:[p.sg,s._Y,s.JJ,s.JL,s.Q7,s.nD,r.oU,r.YG,r.Sm,r.W2,r.Gu,r.pK,r.Ie,r.Q$,r.q_,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9,r.cs,s.sg,s.u]}),i})()}];let D=(()=>{var t;class i{}return(t=i).\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[g.Bz.forChild(v),g.Bz]}),i})(),y=(()=>{var t;class i{}return(t=i).\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[p.ez,s.u5,r.Pc,D,s.UX]}),i})()}}]);